{"title":"系统的捡一下Mysql","uid":"26f3911f90f70b197f9664f32065b4d3","slug":"mysql/系统的捡一下Mysql","date":"2022-05-11T09:57:01.000Z","updated":"2022-05-14T08:19:25.443Z","comments":true,"path":"api/articles/mysql/系统的捡一下Mysql.json","keywords":null,"cover":null,"content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>使用mysql很久了，但没有系统的学习过mysql，看看漏掉了那些基础但又有用东西。</p></blockquote>\n<h1 id=\"一、Mysql基础使用\"><a href=\"#一、Mysql基础使用\" class=\"headerlink\" title=\"一、Mysql基础使用\"></a>一、Mysql基础使用</h1><h2 id=\"1-1-Mysql命令\"><a href=\"#1-1-Mysql命令\" class=\"headerlink\" title=\"1.1 Mysql命令\"></a>1.1 Mysql命令</h2><h3 id=\"1-命令结束符号\"><a href=\"#1-命令结束符号\" class=\"headerlink\" title=\"1. 命令结束符号\"></a>1. 命令结束符号</h3><p>一个命令要想执行必须使用<code>;</code>、<code>\\g</code>、<code>\\G</code>这几个符号之一作为结尾。</p>\n<p>符号<code>\\g</code>等同于<code>;</code>，是我们常用的命令结束语句。<code>\\G</code>可以将数据表格转换为横向，即第一列为字段名，然后数据依次在后面的列，对字段很多的时候的查询展示很有帮助。</p>\n<h3 id=\"2-可以一次提交多个命令\"><a href=\"#2-可以一次提交多个命令\" class=\"headerlink\" title=\"2. 可以一次提交多个命令\"></a>2. 可以一次提交多个命令</h3><p>例如：三个语句同时混合上边的命令结束符号</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">mysql&gt; select now(); select now()\\g select now()\\G\n+---------------------+\n| now()               |\n+---------------------+\n| 2022-05-12 11:34:49 |\n+---------------------+\n1 row in set (0.000 sec)\n\n+---------------------+\n| now()               |\n+---------------------+\n| 2022-05-12 11:34:49 |\n+---------------------+\n1 row in set (0.000 sec)\n\n*************************** 1. row ***************************\nnow(): 2022-05-12 11:34:49\n1 row in set (0.000 sec)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"3-使用-c放弃本次操作\"><a href=\"#3-使用-c放弃本次操作\" class=\"headerlink\" title=\"3. 使用\\c放弃本次操作\"></a>3. 使用<code>\\c</code>放弃本次操作</h3><p>可以使用如果你想放弃本次编写的命令，可以在输入的命令后边加上<code>\\c</code>，比如这样：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">mysql&gt; SELECT NOW()\\c\nmysql&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p>如果不使用<code>\\c</code>，那客户端会以为这是一个多行命令，还在一直傻傻的等你输入命令～</p>\n<h1 id=\"二、MySQL数据类型\"><a href=\"#二、MySQL数据类型\" class=\"headerlink\" title=\"二、MySQL数据类型\"></a>二、MySQL数据类型</h1><h2 id=\"2-1-MySQL整型类型\"><a href=\"#2-1-MySQL整型类型\" class=\"headerlink\" title=\"2.1 MySQL整型类型\"></a>2.1 MySQL整型类型</h2><table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th><strong>占用的存储空间（单位：字节）</strong></th>\n<th>无符号数取值范围</th>\n<th>有符号数取值范围</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>TINYINT</code></td>\n<td>1</td>\n<td>$0\\sim 2^8-1$</td>\n<td>$-2^7\\sim 2^7-1$</td>\n</tr>\n<tr>\n<td><code>SMALLINT</code></td>\n<td>2</td>\n<td>$0\\sim 2^{16}-1$</td>\n<td>$-2^{15}\\sim -2^{15}-1$</td>\n</tr>\n<tr>\n<td><code>MEDIUMINT</code></td>\n<td>3</td>\n<td>$0\\sim 2^{24}-1$</td>\n<td>$-2^{23}\\sim 2^{23}-1$</td>\n</tr>\n<tr>\n<td><code>INT</code>&#x2F;<code>INTEGER</code></td>\n<td>4</td>\n<td>$0 \\sim 2^{32} - 1$</td>\n<td>$-2^{31} \\sim 2^{31}-1$</td>\n</tr>\n<tr>\n<td><code>BIGINT</code></td>\n<td>8</td>\n<td>$0 \\sim 2^{64} - 1$</td>\n<td>$-2^{63} \\sim 2^{63} - 1$</td>\n</tr>\n</tbody></table>\n<h2 id=\"2-2-MySQL浮点型类型\"><a href=\"#2-2-MySQL浮点型类型\" class=\"headerlink\" title=\"2.2 MySQL浮点型类型\"></a>2.2 MySQL浮点型类型</h2><table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th><strong>占用的存储空间（单位：字节）</strong></th>\n<th><strong>绝对值最小非0值</strong></th>\n<th><strong>绝对值最大非0值</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>FLOAT</code></td>\n<td>4</td>\n<td>±1.175494351E-38</td>\n<td>±3.402823466E+38</td>\n</tr>\n<tr>\n<td><code>DOUBLE</code></td>\n<td>8</td>\n<td>±2.2250738585072014E-308</td>\n<td>±1.7976931348623157E+308</td>\n</tr>\n</tbody></table>\n<h2 id=\"2-3-设置最大位数和小数位数\"><a href=\"#2-3-设置最大位数和小数位数\" class=\"headerlink\" title=\"2.3 设置最大位数和小数位数\"></a>2.3 设置最大位数和小数位数</h2><pre class=\"line-numbers language-FLOAT```和```DOUBLE```后面可以跟上两个参数：\" data-language=\"FLOAT```和```DOUBLE```后面可以跟上两个参数：\"><code class=\"language-FLOAT```和```DOUBLE```后面可以跟上两个参数：\">\n&#96;&#96;&#96;sql\nFLOAT(M, D)\nDOUBLE(M, D)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>可以用来限制存储到本列中的小数范围。其中</p>\n<ul>\n<li><code>M</code>表示该小数最多需要的十进制有效数字个数</li>\n<li><code>D</code>表示该小数的小数点后的十进制数字的个数。</li>\n</ul>\n<h2 id=\"2-4-定点数类型\"><a href=\"#2-4-定点数类型\" class=\"headerlink\" title=\"2.4 定点数类型\"></a>2.4 定点数类型</h2><p>类型<code>DECIMAL(M, D)</code>,占用的存储空间取决于<code>M</code>和<code>D</code>，取值范围也取决于<code>M</code>和<code>D</code>。</p>\n<h2 id=\"2-5-日期和时间类型\"><a href=\"#2-5-日期和时间类型\" class=\"headerlink\" title=\"2.5 日期和时间类型\"></a>2.5 日期和时间类型</h2><table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th>存储空间要求</th>\n<th>取值范围</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>YEAR</code></td>\n<td>1字节</td>\n<td>$1901\\sim 2155$</td>\n<td>年份值</td>\n</tr>\n<tr>\n<td><code>DATE</code></td>\n<td>3字节</td>\n<td>$’1000-01-01’\\sim ‘9999-12-31’$</td>\n<td>日期值</td>\n</tr>\n<tr>\n<td><code>TIME</code></td>\n<td>3字节+小数秒的存储空间</td>\n<td>$’-838:59:59[.000000]’ \\sim ‘838:59:59[.000000]’$</td>\n<td>时间值</td>\n</tr>\n<tr>\n<td><code>DATETIME</code></td>\n<td>5字节+小数秒的存储空间</td>\n<td>$’1000-01-01 00:00:00[.000000]’ ～ ‘9999-12-31 23:59:59[.999999]’$</td>\n<td>日期加时间值</td>\n</tr>\n<tr>\n<td><code>TIMESTAMP</code></td>\n<td>4字节+小数秒的存储空间</td>\n<td>$’1970-01-01 00:00:01[.000000]’ ～ ‘2038-01-19 03:14:07[.999999]’$</td>\n<td>时间戳</td>\n</tr>\n</tbody></table>\n<p>小数秒的存储空间：</p>\n<table>\n<thead>\n<tr>\n<th><strong>保留的小数秒位数</strong></th>\n<th><strong>额外需要的存储空间</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td>0</td>\n<td>0字节</td>\n</tr>\n<tr>\n<td>1&#x2F;2</td>\n<td>1字节</td>\n</tr>\n<tr>\n<td>3&#x2F;4</td>\n<td>2字节</td>\n</tr>\n<tr>\n<td>5&#x2F;6</td>\n<td>3字节</td>\n</tr>\n</tbody></table>\n<h2 id=\"2-5-MySQL的字符串类型\"><a href=\"#2-5-MySQL的字符串类型\" class=\"headerlink\" title=\"2.5 MySQL的字符串类型\"></a>2.5 MySQL的字符串类型</h2><table>\n<thead>\n<tr>\n<th><strong>类型</strong></th>\n<th><strong>最大长度</strong></th>\n<th><strong>存储空间要求</strong></th>\n<th><strong>备注</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>CHAR(M)</code></td>\n<td><code>M</code>个字符</td>\n<td><code>M*W</code>个字节</td>\n<td><code>M</code>取值范围<code>0 ~ 255</code>，默认为1<code>CHAR</code>和<code>CHAR(1)</code>同义，<code>CHAR(0)</code>只能存储<code>&#39;&#39;</code>或者<code>NULL</code>；<br /><code>CHAR</code>会对剩余的空间补空格字符补齐</td>\n</tr>\n<tr>\n<td><code>VARCHAR(M)</code></td>\n<td><code>M</code>个字符</td>\n<td><code>L+1</code>或<code>L+2</code>个字节</td>\n<td><code>M</code>理论取值范围<code>0 ~ 65535</code>，<br />但MySQL规定，表中某一行包含的所有列的数据大小总共不得超过65535字节，所以<code>VARCHAR(M)</code>字符数量是小于65535的</td>\n</tr>\n<tr>\n<td><code>TINYTEXT</code></td>\n<td>$2^8-1$个字节</td>\n<td><code>L+1</code>个字节</td>\n<td>不受65535限制</td>\n</tr>\n<tr>\n<td><code>TEXT</code></td>\n<td>$2^{16} - 1$字节</td>\n<td><code>L+2</code>个字节</td>\n<td>不受65535限制</td>\n</tr>\n<tr>\n<td><code>MEDIUMTEXT</code></td>\n<td>$2^{24} - 1$个字节</td>\n<td><code>L+3</code>个字节</td>\n<td>不受65535限制</td>\n</tr>\n<tr>\n<td><code>LONGTEXT</code></td>\n<td>$2^{32} - 1$个字节</td>\n<td><code>L+4</code>个字节</td>\n<td>不受65535限制</td>\n</tr>\n</tbody></table>\n<p>其中<code>M</code>代表该数据类型最多能存储的字符数量，<code>L</code>代表我们实际向该类型的属性中存储的字符串在特定字符集下所占的字节数，<code>W</code>代表在该特定字符集下，编码一个字符最多需要的字节数（ascii取1，gbk取2，utf8取3等）。</p>\n<h2 id=\"2-6-ENUM类型和SET类型\"><a href=\"#2-6-ENUM类型和SET类型\" class=\"headerlink\" title=\"2.6 ENUM类型和SET类型\"></a>2.6 ENUM类型和SET类型</h2><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">ENUM</span><span class=\"token punctuation\">(</span><span class=\"token string\">'str1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'str2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'str3'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">SET</span><span class=\"token punctuation\">(</span><span class=\"token string\">'str1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'str2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'str3'</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h2 id=\"2-7-二进制类型\"><a href=\"#2-7-二进制类型\" class=\"headerlink\" title=\"2.7 二进制类型\"></a>2.7 二进制类型</h2><ul>\n<li><code>BIT(M)</code></li>\n<li><code>BINARY(M)</code>&#x2F;<code>VARBINARY(M)</code></li>\n<li><code>TINYBLOB</code></li>\n<li><code>BLOB</code></li>\n<li><code>MEDIUMBLOB</code></li>\n<li><code>LONGBLOB</code></li>\n</ul>\n<h1 id=\"三、存储函数\"><a href=\"#三、存储函数\" class=\"headerlink\" title=\"三、存储函数\"></a>三、存储函数</h1><h2 id=\"3-1-创建存储函数\"><a href=\"#3-1-创建存储函数\" class=\"headerlink\" title=\"3.1 创建存储函数\"></a>3.1 创建存储函数</h2><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">FUNCTION</span> 存储函数名称<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>参数列表<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">RETURNS</span> 返回值类型\n<span class=\"token keyword\">BEGIN</span>\n    函数体内容\n<span class=\"token keyword\">END</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>例如（要先用<code>delimiter</code>修改语句结束分割符号）：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">delimiter</span> $\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">FUNCTION</span> avg_score<span class=\"token punctuation\">(</span>s <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">RETURNS</span> <span class=\"token keyword\">DOUBLE</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span>     <span class=\"token keyword\">RETURN</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">SELECT</span> <span class=\"token function\">AVG</span><span class=\"token punctuation\">(</span>score<span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> student_score <span class=\"token keyword\">WHERE</span> subject <span class=\"token operator\">=</span> s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">END</span> $\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">delimiter</span> <span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"3-2-查看和删除存储函数\"><a href=\"#3-2-查看和删除存储函数\" class=\"headerlink\" title=\"3.2 查看和删除存储函数\"></a>3.2 查看和删除存储函数</h2><p>查看存储函数：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">FUNCTION</span> <span class=\"token keyword\">STATUS</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">LIKE</span> 需要匹配的函数名<span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>查看函数定义：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">FUNCTION</span> 函数名<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>自定义变量：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SET</span> <span class=\"token variable\">@value</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"3-3-判断语句的编写\"><a href=\"#3-3-判断语句的编写\" class=\"headerlink\" title=\"3.3 判断语句的编写\"></a>3.3 判断语句的编写</h2><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">IF</span> 表达式 <span class=\"token keyword\">THEN</span>\n    处理语句列表\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">ELSEIF</span> 表达式 <span class=\"token keyword\">THEN</span>\n    处理语句列表<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\"># 这里可以有多个ELSEIF语句</span>\n<span class=\"token punctuation\">[</span><span class=\"token keyword\">ELSE</span>\n    处理语句列表<span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">END</span> <span class=\"token keyword\">IF</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"3-4-循环语句的编写\"><a href=\"#3-4-循环语句的编写\" class=\"headerlink\" title=\"3.4 循环语句的编写\"></a>3.4 循环语句的编写</h2><h3 id=\"WHILE循环语句\"><a href=\"#WHILE循环语句\" class=\"headerlink\" title=\"WHILE循环语句\"></a><code>WHILE</code>循环语句</h3><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">WHILE</span> 表达式 <span class=\"token keyword\">DO</span>\n    处理语句列表\n<span class=\"token keyword\">END</span> <span class=\"token keyword\">WHILE</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"REPEAT循环语句\"><a href=\"#REPEAT循环语句\" class=\"headerlink\" title=\"REPEAT循环语句\"></a><code>REPEAT</code>循环语句</h3><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">REPEAT</span>\n    处理语句列表\nUNTIL 表达式 <span class=\"token keyword\">END</span> <span class=\"token keyword\">REPEAT</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"LOOP循环语句\"><a href=\"#LOOP循环语句\" class=\"headerlink\" title=\"LOOP循环语句\"></a><code>LOOP</code>循环语句</h3><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">LOOP</span>\n    处理语句列表\n<span class=\"token keyword\">END</span> <span class=\"token keyword\">LOOP</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"四、存储过程\"><a href=\"#四、存储过程\" class=\"headerlink\" title=\"四、存储过程\"></a>四、存储过程</h1><h2 id=\"4-1-创建存储过程\"><a href=\"#4-1-创建存储过程\" class=\"headerlink\" title=\"4.1 创建存储过程\"></a>4.1 创建存储过程</h2><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">PROCEDURE</span> 存储过程名称<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>参数列表<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">BEGIN</span>\n    需要执行的语句\n<span class=\"token keyword\">END</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>例如：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">delimiter</span> $\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">PROCEDURE</span> t1_operation<span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span>     m1_value <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span>     n1_value <span class=\"token keyword\">CHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">BEGIN</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span>     <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> t1<span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span>     <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> t1<span class=\"token punctuation\">(</span>m1<span class=\"token punctuation\">,</span> n1<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span>m1_value<span class=\"token punctuation\">,</span> n1_value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span>     <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> t1<span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">END</span> $\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">delimiter</span> <span class=\"token punctuation\">;</span>\nmysql<span class=\"token operator\">></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"4-2-存储过程的调用\"><a href=\"#4-2-存储过程的调用\" class=\"headerlink\" title=\"4.2 存储过程的调用\"></a>4.2 存储过程的调用</h2><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">CALL</span> 存储过程<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>参数列表<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"4-3-查看和删除存储过程\"><a href=\"#4-3-查看和删除存储过程\" class=\"headerlink\" title=\"4.3 查看和删除存储过程\"></a>4.3 查看和删除存储过程</h2><p>查看当前数据库中创建的<code>存储过程</code>都有哪些的语句：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">PROCEDURE</span> <span class=\"token keyword\">STATUS</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">LIKE</span> 需要匹配的存储过程名称<span class=\"token punctuation\">]</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>查看某个<code>存储过程</code>具体是怎么定义的语句：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">PROCEDURE</span> 存储过程名称<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>删除<code>存储过程</code>的语句：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">DROP</span> <span class=\"token keyword\">PROCEDURE</span> 存储过程名称<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"4-4-存储过程参数前缀\"><a href=\"#4-4-存储过程参数前缀\" class=\"headerlink\" title=\"4.4 存储过程参数前缀\"></a>4.4 存储过程参数前缀</h2><p>前缀<code>IN</code>，<code>OUT</code>，<code>INOUT</code></p>\n<h1 id=\"五、游标的使用\"><a href=\"#五、游标的使用\" class=\"headerlink\" title=\"五、游标的使用\"></a>五、游标的使用</h1><h2 id=\"5-1-创建游标\"><a href=\"#5-1-创建游标\" class=\"headerlink\" title=\"5.1 创建游标\"></a>5.1 创建游标</h2><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">DECLARE</span> 游标名称 <span class=\"token keyword\">CURSOR</span> <span class=\"token keyword\">FOR</span> 查询语句<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"5-2-打开和关闭游标\"><a href=\"#5-2-打开和关闭游标\" class=\"headerlink\" title=\"5.2 打开和关闭游标\"></a>5.2 打开和关闭游标</h2><p>在创建完游标之后，我们需要手动打开和关闭游标，语法也简单：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">OPEN</span> 游标名称<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">CLOSE</span> 游标名称<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"5-3-使用游标获取记录\"><a href=\"#5-3-使用游标获取记录\" class=\"headerlink\" title=\"5.3 使用游标获取记录\"></a>5.3 使用游标获取记录</h2><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">FETCH</span> 游标名 <span class=\"token keyword\">INTO</span> 变量<span class=\"token number\">1</span><span class=\"token punctuation\">,</span> 变量<span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> 变量n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>每调用一次 FETCH 语句，游标就移动到下一条记录的位置。</p>\n<h1 id=\"六、触发器和事件\"><a href=\"#六、触发器和事件\" class=\"headerlink\" title=\"六、触发器和事件\"></a>六、触发器和事件</h1><h2 id=\"6-1-触发器\"><a href=\"#6-1-触发器\" class=\"headerlink\" title=\"6.1 触发器\"></a>6.1 触发器</h2><p>我们使用<code>MySQL</code>的过程中可能会有下边这些需求：</p>\n<ul>\n<li>在向<code>t1</code>表插入或更新数据之前对自动对数据进行校验，要求<code>m1</code>列的值必须在<code>1~10</code>之间，校验规则如下：<ul>\n<li>如果插入的记录的<code>m1</code>列的值小于<code>1</code>，则按<code>1</code>插入。</li>\n<li>如果<code>m1</code>列的值大于<code>10</code>，则按<code>10</code>插入。</li>\n</ul>\n</li>\n<li>在向<code>t1</code>表中插入记录之后自动把这条记录插入到<code>t2</code>表。</li>\n</ul>\n<p>也就是我们在对表中的记录做增、删、改操作前和后都可能需要让<code>MySQL</code>服务器自动执行一些额外的语句，这个就是所谓的<code>触发器</code>的应用场景。</p>\n<h3 id=\"6-1-1-创建触发器\"><a href=\"#6-1-1-创建触发器\" class=\"headerlink\" title=\"6.1.1 创建触发器\"></a>6.1.1 创建触发器</h3><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TRIGGER</span> 触发器名\n&#123;BEFORE<span class=\"token operator\">|</span><span class=\"token keyword\">AFTER</span>&#125;\n&#123;<span class=\"token keyword\">INSERT</span><span class=\"token operator\">|</span><span class=\"token keyword\">DELETE</span><span class=\"token operator\">|</span><span class=\"token keyword\">UPDATE</span>&#125;\n<span class=\"token keyword\">ON</span> 表名\n<span class=\"token keyword\">FOR EACH ROW</span>\n<span class=\"token keyword\">BEGIN</span>\n    触发器内容\n<span class=\"token keyword\">END</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"6-1-2-查看和删除触发器\"><a href=\"#6-1-2-查看和删除触发器\" class=\"headerlink\" title=\"6.1.2 查看和删除触发器\"></a>6.1.2 查看和删除触发器</h3><p>查看当前数据库中定义的所有触发器的语句：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> TRIGGERS<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>查看某个具体的触发器的定义：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TRIGGER</span> 触发器名<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>删除触发器：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">DROP</span> <span class=\"token keyword\">TRIGGER</span> 触发器名<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"6-2-事件\"><a href=\"#6-2-事件\" class=\"headerlink\" title=\"6.2 事件\"></a>6.2 事件</h2><p>有时候我们想让<code>MySQL</code>服务器在某个时间点或者每隔一段时间自动地执行一些语句，这时候就需要去创建一个<code>事件</code>。</p>\n<h3 id=\"6-2-1-创建事件\"><a href=\"#6-2-1-创建事件\" class=\"headerlink\" title=\"6.2.1 创建事件\"></a>6.2.1 创建事件</h3><pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> EVENT 事件名\n<span class=\"token keyword\">ON</span> SCHEDULE\n&#123;\n    AT 某个确定的时间点<span class=\"token operator\">|</span> \n    EVERY 期望的时间间隔 <span class=\"token punctuation\">[</span>STARTS <span class=\"token keyword\">datetime</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token keyword\">END</span> <span class=\"token keyword\">datetime</span><span class=\"token punctuation\">]</span>\n&#125;\n<span class=\"token keyword\">DO</span>\n<span class=\"token keyword\">BEGIN</span>\n    具体的语句\n<span class=\"token keyword\">END</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>事件支持两种类型的自动执行方式：</p>\n<ol>\n<li><p>在某个确定的时间点执行：</p>\n<p>比如：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> EVENT insert_t1_event\n<span class=\"token keyword\">ON</span> SCHEDULE\nAT <span class=\"token string\">'2019-09-04 15:48:54'</span>\n<span class=\"token keyword\">DO</span>\n<span class=\"token keyword\">BEGIN</span>\n    <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> t1<span class=\"token punctuation\">(</span>m1<span class=\"token punctuation\">,</span> n1<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">END</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n</li>\n<li><p>每隔一段时间执行一次</p>\n<p>比如：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> EVENT insert_t1\n<span class=\"token keyword\">ON</span> SCHEDULE\nEVERY <span class=\"token number\">1</span> <span class=\"token keyword\">HOUR</span>\n<span class=\"token keyword\">DO</span>\n<span class=\"token keyword\">BEGIN</span>\n    <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> t1<span class=\"token punctuation\">(</span>m1<span class=\"token punctuation\">,</span> n1<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">END</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n</ol>\n<h3 id=\"6-2-2-查看和删除事件\"><a href=\"#6-2-2-查看和删除事件\" class=\"headerlink\" title=\"6.2.2 查看和删除事件\"></a>6.2.2 查看和删除事件</h3><p>查看当前数据库中定义的所有事件的语句：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> EVENTS<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>查看某个具体的事件的定义：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">CREATE</span> EVENT 事件名<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>删除事件：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\"><span class=\"token keyword\">DROP</span> EVENT 事件名<span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h3 id=\"6-2-3-事件使用注意事项\"><a href=\"#6-2-3-事件使用注意事项\" class=\"headerlink\" title=\"6.2.3 事件使用注意事项\"></a>6.2.3 事件使用注意事项</h3><p>默认情况下，<code>MySQL</code>服务器并不会帮助我们执行事件，除非我们使用下边的语句手动开启该功能：</p>\n<pre class=\"line-numbers language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> <span class=\"token keyword\">GLOBAL</span> event_scheduler <span class=\"token operator\">=</span> <span class=\"token keyword\">ON</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n\nmysql<span class=\"token operator\">></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>小贴士： event_scheduler其实是一个系统变量，它的值也可以在MySQL服务器启动的时候通过启动参数或者通过配置文件来设置event_scheduler的值。这些所谓的系统变量、启动参数、配置文件的各种东东并不是我们小白现在需要掌握的，大家忽略它们就好了～</p></blockquote>\n","text":" 使用mysql很久了，但没有系统的学习过mysql，看看漏掉了那些基础但又有用东西。 一、Mysql基础使用1.1 Mysql命令1. 命令结束符号一个命令要想执行必须使用;、\\g、\\G这几个符号之一作为结尾。 符号\\g等同于;，是我们常用的命令结束语句。\\G可以将数据表格转换...","link":"","photos":[],"count_time":{"symbolsCount":"5.5k","symbolsTime":"5 mins."},"categories":[],"tags":[{"name":"mysql","slug":"mysql","count":2,"path":"api/tags/mysql.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81Mysql%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">一、Mysql基础使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-1-Mysql%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">1.1 Mysql命令</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E5%91%BD%E4%BB%A4%E7%BB%93%E6%9D%9F%E7%AC%A6%E5%8F%B7\"><span class=\"toc-text\">1. 命令结束符号</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%8F%AF%E4%BB%A5%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4%E5%A4%9A%E4%B8%AA%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">2. 可以一次提交多个命令</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E4%BD%BF%E7%94%A8-c%E6%94%BE%E5%BC%83%E6%9C%AC%E6%AC%A1%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">3. 使用\\c放弃本次操作</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">二、MySQL数据类型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-1-MySQL%E6%95%B4%E5%9E%8B%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.1 MySQL整型类型</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-2-MySQL%E6%B5%AE%E7%82%B9%E5%9E%8B%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.2 MySQL浮点型类型</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-3-%E8%AE%BE%E7%BD%AE%E6%9C%80%E5%A4%A7%E4%BD%8D%E6%95%B0%E5%92%8C%E5%B0%8F%E6%95%B0%E4%BD%8D%E6%95%B0\"><span class=\"toc-text\">2.3 设置最大位数和小数位数</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-4-%E5%AE%9A%E7%82%B9%E6%95%B0%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.4 定点数类型</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-5-%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.5 日期和时间类型</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-5-MySQL%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.5 MySQL的字符串类型</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-6-ENUM%E7%B1%BB%E5%9E%8B%E5%92%8CSET%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.6 ENUM类型和SET类型</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-7-%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">2.7 二进制类型</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">三、存储函数</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-1-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">3.1 创建存储函数</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-2-%E6%9F%A5%E7%9C%8B%E5%92%8C%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">3.2 查看和删除存储函数</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-3-%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BC%96%E5%86%99\"><span class=\"toc-text\">3.3 判断语句的编写</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-4-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5%E7%9A%84%E7%BC%96%E5%86%99\"><span class=\"toc-text\">3.4 循环语句的编写</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#WHILE%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">WHILE循环语句</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#REPEAT%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">REPEAT循环语句</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#LOOP%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">LOOP循环语句</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">四、存储过程</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-1-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">4.1 创建存储过程</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-2-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E8%B0%83%E7%94%A8\"><span class=\"toc-text\">4.2 存储过程的调用</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-3-%E6%9F%A5%E7%9C%8B%E5%92%8C%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">4.3 查看和删除存储过程</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-4-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%8F%82%E6%95%B0%E5%89%8D%E7%BC%80\"><span class=\"toc-text\">4.4 存储过程参数前缀</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BA%94%E3%80%81%E6%B8%B8%E6%A0%87%E7%9A%84%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">五、游标的使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-1-%E5%88%9B%E5%BB%BA%E6%B8%B8%E6%A0%87\"><span class=\"toc-text\">5.1 创建游标</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-2-%E6%89%93%E5%BC%80%E5%92%8C%E5%85%B3%E9%97%AD%E6%B8%B8%E6%A0%87\"><span class=\"toc-text\">5.2 打开和关闭游标</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-3-%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87%E8%8E%B7%E5%8F%96%E8%AE%B0%E5%BD%95\"><span class=\"toc-text\">5.3 使用游标获取记录</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%85%AD%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8%E5%92%8C%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">六、触发器和事件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-1-%E8%A7%A6%E5%8F%91%E5%99%A8\"><span class=\"toc-text\">6.1 触发器</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-1-1-%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8\"><span class=\"toc-text\">6.1.1 创建触发器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-1-2-%E6%9F%A5%E7%9C%8B%E5%92%8C%E5%88%A0%E9%99%A4%E8%A7%A6%E5%8F%91%E5%99%A8\"><span class=\"toc-text\">6.1.2 查看和删除触发器</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-2-%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">6.2 事件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-2-1-%E5%88%9B%E5%BB%BA%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">6.2.1 创建事件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-2-2-%E6%9F%A5%E7%9C%8B%E5%92%8C%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6\"><span class=\"toc-text\">6.2.2 查看和删除事件</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#6-2-3-%E4%BA%8B%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9\"><span class=\"toc-text\">6.2.3 事件使用注意事项</span></a></li></ol></li></ol></li></ol>","author":{"name":"Wttch","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Always trust your spirit.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"深入理解java虚拟机（一）","uid":"15c9c1ab2fcef5aa3d42081d95493338","slug":"java/jvm/深入理解java虚拟机/深入理解java虚拟机（一）","date":"2022-05-13T02:54:44.000Z","updated":"2022-05-14T05:45:03.454Z","comments":true,"path":"api/articles/java/jvm/深入理解java虚拟机/深入理解java虚拟机（一）.json","keywords":null,"cover":[],"text":"一、Java 内存区域与内存溢出异常1.1 运行时数据区域java虚拟机在执行java程序的过程中会把它管理的内存划分为若干个不同的数据区域。这些区域各有各自的用途，以及创建时间和销毁时间，有的区域随着虚拟机的进程的启动而一直存在，有些区域则是依赖用户线程的启动和结束而建立和销毁...","link":"","photos":[],"count_time":{"symbolsCount":"8.2k","symbolsTime":"7 mins."},"categories":[],"tags":[{"name":"java","slug":"java","count":3,"path":"api/tags/java.json"},{"name":"jvm","slug":"jvm","count":2,"path":"api/tags/jvm.json"},{"name":"笔记","slug":"笔记","count":2,"path":"api/tags/笔记.json"}],"author":{"name":"Wttch","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Always trust your spirit.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"软件公司可重用库的建设","uid":"2a123aa39ec1f5ddc61848229772e97d","slug":"架构/软件公司可重用库的建设","date":"2022-04-07T09:40:35.000Z","updated":"2022-05-13T15:59:53.308Z","comments":true,"path":"api/articles/架构/软件公司可重用库的建设.json","keywords":null,"cover":null,"text":" 很早之前看到的很有感悟的一片文章，备份一下，防丢。原文地址 这个想法由来已久，也是因为自己在现在效力的公司中能看到一些不良的现象，但自己却不是管理层，没有任何的执行力去改变它。 软件公司管理职位越往上，越不熟悉技术方面，加上此举和重构一样，很可能是吃力不讨好的做法，要得到执行则...","link":"","photos":[],"count_time":{"symbolsCount":"4.6k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"架构","slug":"架构","count":1,"path":"api/tags/架构.json"},{"name":"转载","slug":"转载","count":1,"path":"api/tags/转载.json"}],"author":{"name":"Wttch","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Always trust your spirit.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}